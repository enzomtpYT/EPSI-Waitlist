{% extends "base.html" %}

{% block title %}Admin - Modifier Candidat{% endblock %}

{% block content %}
<h1>Candidat : {{ candidate.name_candidate }} {{ candidate.lastname_candidate }}</h1>

<div class="admin-section">
    <h2>Modifier les informations du/de la candidat.e</h2>
    <form action="{{ url_for('candidate.edit_candidate', id_candidate=candidate.id_candidate) }}" method="post">
        <label for="candidate_lastname">Nom :</label>
        <input type="text" id="candidate_lastname" name="candidate_lastname" value="{{ candidate.lastname_candidate }}">

        <label for="candidate_name">Prénom :</label>
        <input type="text" id="candidate_name" name="candidate_name" value="{{ candidate.name_candidate }}">

        <label for="candidate_email">E-mail :</label>
        <input type="email" id="candidate_email" name="candidate_email" value="{{ candidate.email_candidate }}">

        <label for="tags">Tags :</label>
        <select id="tags" name="tags" multiple>
            {% for tag in tags %}
            <option value="{{ tag.id_tag }}" {% if tag.id_tag in candidate_tag_ids %}selected{% endif %}>{{ tag.name_tag }}</option>
            {% endfor %}
        </select>

        <button type="submit">Enregistrer</button>
    </form>
</div>

<div class="admin-section">
    <h2>Tags du/de la candidat.e</h2>
    <ul>
        {% for tag in candidate_tags %}
        <li>
            {{ tag.name_tag }}
            <form action="{{ url_for('candidate.remove_tag_from_candidate_route', id_candidate=candidate.id_candidate, id_tag=tag.id_tag) }}" method="post" style="display:inline;">
                <button type="submit">-</button>
            </form>
        </li>
        {% endfor %}
    </ul>
</div>

<div class="admin-section">
    <h2>Liste des entretiens</h2>
    {% if interviews %}
    <table>
        <thead>
            <tr>
                <th>Événement</th>
                <th>Date</th>
                <th>Intervenant</th>
            </tr>
        </thead>
        <tbody>
            {% for interview in interviews %}
            <tr>
                <td>{{ interview.name_event }}</td>
                <td>{{ interview.date_event }}</td>
                <td>{{ interview.name_participant }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Aucun entretien trouvé pour ce candidat.</p>
    {% endif %}
</div>

<div class="admin-section">
    <h2>Supprimer le/la candidat.e</h2>
    <form action="/admin/manage_candidate/{{ candidate.id_candidate }}/delete" method="post">
        <button class="delete" type="submit" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce candidat ?');">Supprimer</button>
    </form>
</div>

{% endblock %}