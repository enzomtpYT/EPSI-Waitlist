{% extends "base.html" %}

{% block title %}Admin - Modifier Intervenant{% endblock %}

{% block content %}
<h1>Intervenant : {{ participant.name_participant }}</h1>

<div class="manageinfos">
    <div class="admin-section">
        <h2>Modifier les informations de l'intervenant</h2>
        <form action="{{ url_for('participant.edit_participant', id_participant=participant.id_participant) }}" method="post">

            <label for="participant_name">Nom :</label>
            <input type="text" id="participant_name" name="participant_name" value="{{ participant.name_participant }}">

            <label for="participant_email">E-mail :</label>
            <input type="email" id="participant_email" name="participant_email" value="{{ participant.email_participant }}">

            <button type="submit">Enregistrer</button>
        </form>
    </div>

    <div class="admin-section">
        <h2>Tags de l'intervenant</h2>
        <div class="taglist">
            {% for tag in participant_tags %}
                <form class="tagform" action="{{ url_for('participant.remove_tag_participant', id_participant=participant.id_participant) }}" method="post" style="display:inline;">
                    <input type="hidden" name="tag" value="{{ tag.id_tag }}">
                    <button class="delete remove-tag" type="submit" name="remove_tag">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 0 1 1.414 0L10 8.586l4.293-4.293a1 1 0 1 1 1.414 1.414L11.414 10l4.293 4.293a1 1 0 0 1-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L8.586 10 4.293 5.707a1 1 0 0 1 0-1.414" clip-rule="evenodd"></path></svg>
                    {{ tag.name_tag }}
                    </button>
                </form>
            {% endfor %}
        </div>
    </div>

    <div class="admin-section">
        <h2>Ajouter un tag</h2>
        <div class="taglist">
            {% for tag in tags %}
                <form class="tagform" action="{{ url_for('participant.add_tag_participant', id_participant=participant.id_participant) }}" method="post" style="display: inline;">
                    {% if tag.id_tag not in participant_tags|map(attribute='id_tag') %}
                    <input type="hidden" name="tag" value="{{ tag.id_tag }}">
                        <button class="add-tag" type="submit" name="add_tag">
                        <svg class="plussvg" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 0 1 1.414 0L10 8.586l4.293-4.293a1 1 0 1 1 1.414 1.414L11.414 10l4.293 4.293a1 1 0 0 1-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L8.586 10 4.293 5.707a1 1 0 0 1 0-1.414" clip-rule="evenodd"></path></svg>
                        {{ tag.name_tag }}
                        </button>
                    {% endif %}
                </form>
            {% endfor %}
        </div>
    </div>
</div>

<div class="admin-section">
    <h2>Liste des entretiens</h2>
    {% if interviews %}
    <table>
        <thead>
            <tr>
                <th>Événement</th>
                <th>Date</th>
                <th>Candidat</th>
            </tr>
        </thead>
        <tbody>
            {% for interview in interviews %}
            <tr>
                <td>{{ interview.name_event }}</td>
                <td>{{ interview.date_event }}</td>
                <td>{{interview.name_candidate}} {{ interview.lastname_candidate }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Aucun entretien trouvé pour cet intervenant.</p>
    {% endif %}
</div>

<div class="admin-section">
    <h2>Supprimer l'intervenant</h2>
    <form action="/admin/manage_participant/{{ participant.id_participant }}/delete" method="post">
        <button class="delete" type="submit" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet intervenant ?');">Supprimer</button>
    </form>
</div>

{% endblock %}